<!-- Modal -->
@using Sitecore.Mvc.Configuration;
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@model Sitecore.AdaniHousing.Website.Models.FreshdeskCreateTicketModel
<!-- Modal -->
@{
    string IsShow = string.Empty;
    string IsDisplay = string.Empty;
    if (ViewBag.Error != null)
    {
        IsShow = "mode-block";
        IsDisplay = "style=\"display:block\"";
    }
    string msg = "";
    if(Session["result"]!= null)
    {
        msg = Session.GetAndRemove("result").ToString();
    }
    if (ViewBag.result != null)
    {
        msg = ViewBag.result.ToString();
    }
}
<div class="wrapper-body">
    @if (Model != null)
    {
        //using (Html.BeginForm())
        using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { id = "AfterLoginSupportForm", name = "AfterLoginSupportForm", @class = "user_profile apply_loan", enctype = "multipart/form-data" }))
        {
            @Html.AddUniqueFormId()
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true)
            @Html.HiddenFor(m => m.PageInfo, new { @Value = HttpContext.Current.Request.Url.AbsoluteUri })
            @Html.HiddenFor(m => m.FormName, new { @Value = HttpContext.Current.Request.Url.AbsolutePath })
            <div class="row">
                <div class="col-lg-7">
                    <h3>Raise a query</h3>
                    <div class="row mb-3">
                        <div class="col-lg-12">
                            <p id="applyErrorMsg" class="field-validation-error help-block required">@msg</p>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-4">
                            @Html.LabelFor(model => model.Name, "Name")<span class="required">*</span>
                        </div>
                        <div class="col-lg-8">
                            <div class="form-group">
                                @Html.TextBoxFor(model => model.Name, new { @class = "form-control", required = "required", id = "SupportName", @readonly = "readonly" })
                                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "help-block required" }, "p")
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-4">
                            @Html.LabelFor(model => model.LoanAccountNo, "LAN")<span class="required">*</span>
                        </div>
                        <div class="col-lg-8">
                            <div class="form-group">
                                @Html.DropDownListFor(x => x.LoanAccountNo, new SelectList(Model.LoanAccountNoList, "Value", "Text"), "Select Loan Account" , htmlAttributes: new { id = "SupportLAN", @class = "form-control", required = "required" })
                                @Html.ValidationMessageFor(x => x.LoanAccountNo, "", new { @class = "help-block required" }, "p")
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-4">
                            @Html.LabelFor(model => model.MobileNo, "Mobile No.")<span class="required">*</span>
                        </div>
                        <div class="col-lg-8">
                            <div class="form-group">
                                @Html.TextBoxFor(model => model.MobileNo, new { @class = "form-control", required = "required", id = "SupportMobile", maxlength = "10", type = "number", @readonly = "readonly" })
                                @Html.ValidationMessageFor(model => model.MobileNo, "", new { @class = "help-block required" }, "p")
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-4">
                            @Html.LabelFor(model => model.Subject, "Subject")<span class="required">*</span>
                        </div>
                        <div class="col-lg-8">
                            <div class="form-group">
                                @Html.DropDownListFor(x => x.Subject, new SelectList(Model.SubjectList, "Value", "Text"), "Select subject", htmlAttributes: new {id="SupportSubject", @class = "form-control", required = "required" })
                                @Html.ValidationMessageFor(x => x.Subject, "", new { @class = "help-block required" }, "p")
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-4">
                            @Html.LabelFor(model => model.EmailID, "Email")<span class="required">*</span>
                        </div>
                        <div class="col-lg-8">
                            <div class="form-group">
                                @Html.TextBoxFor(model => model.EmailID, new { @class = "form-control", required = "required", id = "SupportEmailId" })
                                @Html.ValidationMessageFor(model => model.EmailID, "", new { @class = "help-block required" }, "p")
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-4">
                            @Html.LabelFor(model => model.Message, "Message")<span class="required">*</span>
                        </div>
                        <div class="col-lg-8">
                            <div class="form-group">
                                @Html.TextAreaFor(model => model.Message, new { @class = "form-control", id = "SupportMessage", required = "required", maxlength = 150, rows = "3" })
                                @Html.ValidationMessageFor(model => model.Message, "", new { @class = "help-block required" }, "p")
                            </div>
                        </div>
                    </div>
                    <div class="row">                        
                        <div class="col-lg-12">
                            <button type="submit" name="Submit" id="AfterLoginSupportFormSubmit" value="Submit" class="btn btn-primary">Submit</button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="side_thumb">
                        <img src="/-/media/6A530B11B73A4289AF71A96615979EF0.ashx">
                    </div>
                </div>
            </div>
        }
    }
</div>