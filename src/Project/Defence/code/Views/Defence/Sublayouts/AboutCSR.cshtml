@using Sitecore
@using Sitecore.Data.Fields
@using Sitecore.Mvc.Presentation

@{
    var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
    var elements = Sitecore.Context.Database.GetItem(datasource);

    Sitecore.Data.Fields.ImageField thumbnail = ((Sitecore.Data.Fields.ImageField)elements.Fields["__Thumbnail"]);
    var thumbimg = Sitecore.Resources.Media.MediaManager.GetMediaUrl(thumbnail.MediaItem);

    Sitecore.Data.Fields.ImageField ImageField1 = ((Sitecore.Data.Fields.ImageField)elements.Fields["BackgroundImage"]);

    MultilistField Select = elements.Fields["Select"];
    var selectitem = Select.GetItems();

    var itemslinks = "";
}

<section class="position-relative d-block tile-03 sports-m-block" id="ProKabaddi">
    <div class="bg-images">

        @if (ImageField1.MediaItem != null && ImageField1.MediaItem.ToString() != "")
        {
            var imgurl = Sitecore.Resources.Media.MediaManager.GetMediaUrl(ImageField1.MediaItem);
            <img src=@imgurl />
        }
        else
        {
            <img src=@thumbimg />
        }

    </div>
    <div class="container">
        <div class="section-title position-relative">
            <h1>@Html.Sitecore().Field("Title", elements)</h1>
        </div>
        <div class="row csr-slider pt-3">
            @foreach (var item in selectitem)
            {
                Sitecore.Data.Fields.CheckboxField checkboxField = item.Fields["IsVideo"];
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-md-6 my-3 pt-5">
                            <h3>
                                @Html.Sitecore().Field("FirstTitle", item)<br />
                                @Html.Sitecore().Field("SecondTitle", item)
                            </h3>
                            <p class="py-4">
                                @Html.Sitecore().Field("Description", item)
                            </p>
                        </div>
                        <div class="col-md-6 my-3 text-right">

                            @if (checkboxField != null && checkboxField.Checked)
                            {
                                Sitecore.Data.Fields.LinkField field2 = ((Sitecore.Data.Fields.LinkField)item.Fields["Video"]);
                                if (field2.GetFriendlyUrl() != null && field2.GetFriendlyUrl() != "")
                                {
                                    itemslinks = field2.GetFriendlyUrl();
                                    <video preload="auto" loop="true" autoplay="true" muted="" class="img-fluid">
                                        <source src="@itemslinks" type="video/mp4">
                                    </video>
                                }
                                else
                                {
                                    <img src=@thumbimg class="img-fluid" />
                                }

                            }
                            else
                            {
                                Sitecore.Data.Fields.ImageField ImageField2 = ((Sitecore.Data.Fields.ImageField)item.Fields["Image"]);
                                if (ImageField2.MediaItem != null && ImageField2.MediaItem.ToString() != "")
                                {
                                    var imageurl = Sitecore.Resources.Media.MediaManager.GetMediaUrl(ImageField2.MediaItem);
                                    <img src=@imageurl class="img-fluid" />
                                }
                                else
                                {
                                    <img src=@thumbimg class="img-fluid" />
                                }
                            }
                        </div>
                    </div>
                </div>
            }
                
            </div>
    </div>
</section>

