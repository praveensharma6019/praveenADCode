@using Sitecore.Foundation.Dictionary.Extensions
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Mvc.Configuration
@model List<Sitecore.Transmission.Website.TransmissionInsertCostCalculator>

@{
    var count = 1;
}
@if (Session["Message"] != null && !string.IsNullOrEmpty(Session["Message"].ToString()))
{

    Response.Redirect("/Calculate-Carbon-Footprint");

}

else
{
    using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { id = "frmNewConnectionApplicationList", @class = "form-signin", enctype = "multipart/form-data" }))
    {
        @Html.AddUniqueFormId()
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        <!-- Page Content -->
        <section class="section_calc">
            <div class="container">
                <div class="row mb-4">
                    <div class="col-lg-8">
                        @*<div class="col-sm-6 pb-3 text-left">
                                //<p><span><b>Welcome, </b></span><b class="txt-orange">@UserSession.AEMLCONLECUserSessionContext.LECName <span class="fa fa-user ml-2 mr-1"></span></b></p>
                            </div>*@
                        <h1>Welcome, @Session["UserName"]</h1>
                        <h2>Your previous carbon calculations</h2>
                    </div>


                    <div class="col-lg-4">
                        <p class="btn-logout text-lg-right text-left mt-lg-0 mt-3">

                            <button id="logoutbtn" class="btn btn-primary">
                                <span class="fa fa-sign-out-alt mr-2" style="
"></span>Logout
                            </button>
                        </p>
                    </div>

                </div>

                <div class="table-responsive table-calc">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Sr. No</th>
                                <th>Date</th>
                                <th>Total Domestic Uses</th>
                                <th>Total Transportation Uses</th>
                                <th>Average Annual Carbon Footprint per person in India</th>

                                <th>Average Emission per Month per person</th>
                                <th>No.of Trees needed to remove Your Carbon Footprint</th>
                                <th>Emission from Air Trips</th>
                                <th>Land Needed (Hectares) to plant trees for removing your carbon footprint</th>
                                <th> Your Annual Carbon Footprint</th>
                            </tr>
                        </thead>
                        <tbody>


                            @foreach (var app in Model)
                            {
                                <tr>
                                    <td>@count</td>
                                    <td>@Convert.ToDateTime(app.FormSubmitOn).ToString("MM-dd-yyyy")</td>
                                    <td>@app.EmissionfromDomesticUse</td>
                                    <td>
                                        @app.EmissionfromTransportation
                                    </td>
                                    <td>
                                        1.94
                                    </td>


                                    <td>
                                        @app.AverageEmissionperMonth
                                    </td>
                                    <td>
                                        @app.NumberofTreesNeeded
                                    </td>
                                    <td>
                                        @app.NumberofTrips
                                    </td>
                                    <td>
                                        @app.LandNeededtoPlantTrees
                                    </td>
                                    <td>
                                        @app.AnnualCarbonFootprint
                                    </td>
                                </tr>
                                count = count + 1;
                            }

                        </tbody>
                    </table>
                </div>

                <div class="text-right">
                    <a href="/Calculate-Carbon-Footprint" class="btn btn-primary">Calculate</a>
                </div>
            </div>
        </section>

        if (Session["ReviewMessage"] != null && !string.IsNullOrEmpty(Session["ReviewMessage"].ToString()))
        {
            <div class="form-group row">
                <input id="ReviewMessage" type="hidden" value="@Session["ReviewMessage"].ToString()" />
            </div>

            <div id="message_modal" class="modal fade show" role="dialog" style="display: none; padding-right: 17px;" data-id="">
                <div class="modal-dialog modal-dialog-centered">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <p>Message</p>
                            <button type="button" class="close" data-dismiss="modal">X</button>
                        </div>
                        <div class="modal-body">
                            @if (Session["ReviewMessage"] != null && !string.IsNullOrEmpty(Session["ReviewMessage"].ToString()))
                            {
                                <div class="form-group row">
                                    <label for="" class="col-sm-12 col-form-label txt-green">@Session["ReviewMessage"].ToString()</label>
                                </div>
                                Session["ReviewMessage"] = null;
                                Session["AlertMessage"] = null;
                            }
                        </div>
                        <button type="button" style="padding-bottom:10px;" class="close" data-dismiss="modal">Ok</button>
                    </div>

                </div>
            </div>
        }

    }

}
