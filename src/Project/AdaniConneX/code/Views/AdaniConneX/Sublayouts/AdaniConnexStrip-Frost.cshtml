@using Sitecore.Data.Fields
@using Sitecore.Data.Items
@using Sitecore.Mvc
@model Sitecore.Mvc.Presentation.RenderingModel
@{
var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
Item model = Sitecore.Context.Database.GetItem(datasource);
string imgurl = "";
string altText = "";
}
@if(model != null)
{
Sitecore.Data.Fields.LinkField linkField = model.Fields["CTALink"];
var btnUrl = linkField.GetFriendlyUrl();
Sitecore.Data.Fields.ImageField imgField = ((Sitecore.Data.Fields.ImageField)model.Fields["Image"]);
if (imgField != null && imgField.MediaItem != null)
{
imgurl = Sitecore.Resources.Media.MediaManager.GetMediaUrl(imgField.MediaItem);
altText = imgField.Alt;
}
<div class="section-holder sustainability-wrapper homepageBannerSection">
   <div class="content-wrapper pressPopupOpen">
      <div class="sustainability-content grid-wrapper press_popup_background">
         <p class="h2 fm-asb tx-000">@Html.Sitecore().Field("Text", model) 
            <span class="d-txt">@Html.Sitecore().Field("SubTitle", model) <a href="@btnUrl" class="know_more">@Html.Sitecore().Field("CTAText", model)</a></span></p>
         
            <img src="@imgurl" alt="@altText">

             @if (btnUrl != null)
            {
            CheckboxField checkbox = model.Fields["ExternalLink"];
            if (checkbox != null && checkbox.Checked)
            {
            <a href="@btnUrl" target="_blank" class="btn small press_btn">@Html.Sitecore().Field("CTAText", model)</a>
            }
            else
            {
            <a href="@btnUrl" class="btn small press_btn">@Html.Sitecore().Field("CTAText", model)</a>
            }
            }
            else
            {
            <a href="javascript:void(0)" class="btn small press_btn">@Html.Sitecore().Field("CTAText", model)</a>
            }
      </div>      
   </div>
</div>
}