@using Sitecore
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@model Sitecore.Mvc.Presentation.RenderingModel
@{
    /**/

    var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
    var model = Sitecore.Context.Database.GetItem(datasource);


    var paramid = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.Parameters;

    var CarboEmissions = paramid["CarboEmissions"] != null ? Sitecore.Context.Database.GetItem(paramid["CarboEmissions"]) : null;
    var UserCharter = paramid["UserCharter"] != null ? Sitecore.Context.Database.GetItem(paramid["UserCharter"]) : null;
    var Testimonial = paramid["Testimonial"] != null ? Sitecore.Context.Database.GetItem(paramid["Testimonial"]) : null;
    var Feedback = paramid["Feedback"] != null ? Sitecore.Context.Database.GetItem(paramid["Feedback"]) : null;
    var Report = paramid["Report"] != null ? Sitecore.Context.Database.GetItem(paramid["Report"]) : null;


}

@if (CarboEmissions != null)
{
 Sitecore.Data.Fields.LinkField linkfld = CarboEmissions.Fields["Link"];
                        var url = linkfld.GetFriendlyUrl();

<section class="bg-cream section-bottom d-none">
        <div class="container-fluid">
            <div class="carbon-emmission p-5" data-aos="fade-up" data-aos-duration="2000">
                <div class="bg-images"> @Html.Sitecore().ImageField("Image", CarboEmissions, 0, 0, "")</div>
                <h2>@Html.Sitecore().Field("Summary", CarboEmissions)</h2>
                <p>@Html.Sitecore().Field("Body", CarboEmissions)</p>
                <div class="d-block"><a target="_blank" href="@url" class="btn btn-gradient">Find Out More</a></div>
            </div>
        </div>
    </section>
}

@if (UserCharter != null || Testimonial != null)
{
<section class="bg-white pt-lg-5 pt-5 pb-4 testimonial-main d-none">
        <div class="container-fluid position-relative">
            <div class="row">
                <div class="col-lg-12 p-5 single-block" data-aos="fade-left" data-aos-offset="300" data-aos-easing="ease-in-sine">
				<!-- <div class="bg-images"><img src="https://via.placeholder.com/350x150"></div> -->
				<div class="bg-images"> @Html.Sitecore().ImageField("Image", UserCharter, 0, 0, "img-fluid")</div>
                    <div class="position-relative">
					@if (UserCharter != null)
                    {
                        <h2>@Html.Sitecore().Field("Title", UserCharter)</h2>
                        <p>@Html.Sitecore().Field("Body", UserCharter)</p>

                        Sitecore.Data.Fields.LinkField linkfld = UserCharter.Fields["Link"];
                        var url = linkfld.GetFriendlyUrl();

                        <br />
                        <div class="d-block"><a href="@url" class="btn btn-gradient">Find Out More</a></div>
                    }
					</div>
                </div>
                <div class="col-lg-6 p-5 text-center single-block bg-green d-none"> 
                     @if (Testimonial != null) 
                     { 
                         <div class="owl-carousel testimonials" data-aos="fade-right" data-aos-offset="300" data-aos-easing="ease-in-sine"> 
                             @foreach (var element in Testimonial.GetChildren().ToList()) 
                              { 
                                 <div class="item"> 
                                    <h2>@Html.Sitecore().Field("Title", element)</h2>
                                    <p>@Html.Sitecore().Field("Body", element)</p>
                               </div> 
                            } 
                         </div> 
                    } 
                 </div> 
				
            </div>
        </div>
    </section>

}
@if (Feedback != null || Report != null)
{

<section class="bg-cream section-bottom" id="Feedback">
<div class="">
	<div class="container-fluid">
        <div class="row">
		
		<div class="col-lg-6 mb-lg-0 mb-5 mr-auto">
		  @if (Feedback != null)
                {
                Sitecore.Data.Fields.LinkField linkfld = Feedback.Fields["Link"];
                var url = linkfld.GetFriendlyUrl();
                    <div class="home-feedback">
                        <div class="home-feedback-thumb">
                            @Html.Sitecore().ImageField("Image", Feedback, 0, 0, "img-fluid")
                        </div>
                        <div class="home-feedback-content">
                            <h2>@Html.Sitecore().Field("Title", Feedback)</h2>
                            <p><a href="@url" class="btn btn-primary">Feedback</a></p>
                        </div>
                    </div>
					}
                </div>
		
            <div class="col-lg-6 ml-auto">
			  @if (Report != null)
                {
                Sitecore.Data.Fields.LinkField linkfld = Report.Fields["Link"];
                var url = linkfld.GetFriendlyUrl();
                    <div class="home-feedback ml-auto">
                        <div class="home-feedback-thumb">
							 @Html.Sitecore().ImageField("Image", Report, 0, 0, "img-fluid")
                        </div>
                        <div class="home-feedback-content">
                            <h2>@Html.Sitecore().Field("Title", Report)</h2>
                            <p><a href="@url" class="btn btn-primary">Report</a></p>
                        </div>
                    </div>
					}
                </div>
            
        </div>
    </div>
</div>
</section>
}
