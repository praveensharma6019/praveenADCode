@using Sitecore.Mvc.Configuration
@using Sitecore.Mvc
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@model Sitecore.Ports.Website.Models.PortsGMSGrievanceBookingModel
@using Sitecore.Ports.Website.Models
@{
    /**/
    var Home = Sitecore.Context.Database.GetItem("{11DA71B0-CCA3-4C7C-A77A-53A15DE042C6}");
    var GrievanceBooking = Sitecore.Context.Database.GetItem("{E0C7C969-5528-495A-87FE-681FF4E07DF5}");
    var Logout = Sitecore.Context.Database.GetItem("{47B87494-30B8-4AA7-AE92-C9BC02116B90}");
    var GrievanceNature = Sitecore.Context.Database.GetItem("{301E006B-B9D7-4C16-8B34-76F787790D60}");
    var GrievanceLocation = Sitecore.Context.Database.GetItem("{70698054-837C-4B00-8A88-9FA2839DF02D}");
    var Subject = Sitecore.Context.Database.GetItem("{DE17AA48-0178-43C5-B95F-8441816541B7}");
    var GrievanceCompany = Sitecore.Context.Database.GetItem("{BC6E06C6-2DC4-42EA-B954-FDA1CD5DD36C}");
    var GrievanceWhoImpacted = Sitecore.Context.Database.GetItem("{D08C66E4-E422-441D-8D23-3FA2BDDA1E37}");
    var GrievanceInbrief = Sitecore.Context.Database.GetItem("{D165271B-1EBC-4ED4-A531-05B893AFE759}");
    var Attachment = Sitecore.Context.Database.GetItem("{06723C49-B61B-4961-8275-F673902EAE36}");
    var Submit = Sitecore.Context.Database.GetItem("{5A6FBB00-8218-439F-A689-F08195B0DB40}");
    var Close = Sitecore.Context.Database.GetItem("{3D1E6B34-4AD8-4F89-8DA4-35E9BE3642D1}");
    var WhoImpacted = Sitecore.Context.Database.GetItem("{AB8F2314-5D70-40B4-9E5C-6C1062F6BCFC}");
    var Nature = Sitecore.Context.Database.GetItem("{39DA8970-3944-4F15-9A7D-7E9157ACB4F2}");
    var Location = Sitecore.Context.Database.GetItem("{0BE032CE-0BC0-49B9-8182-5DBCFA1349BE}");
    var Company = Sitecore.Context.Database.GetItem("{1B5C8C51-E533-449F-A06B-F96F58011CE7}");
    var item = Sitecore.Context.Database.GetItem(PortsGMSTemplates.Grievance.GrievanceStakHolderDashbord);
    var Link = item.Url();
}
<section class="breadcrumb-sub-layout bg-white  pt-5 pb-4">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <ul class="breadcrumb-sublayout-ul">
                    <li><a href="@Link">@Home["Title"]</a></li>
                    <li>@GrievanceBooking["Title"]</li>
                </ul>
            </div>
            <div class="col-lg-6 text-right">
                <p class="user_logout"><a href="/Grievance/Logout"><span class="fa fa-sign-out mr-2"></span>@Logout["Title"]</a></p>
            </div>
        </div>
    </div>
</section>

<section class="pb-5 bg-white">
    <div class="container">
        @if (Session["SuccessMsg"] != null)
        {
            <div class="alert-success mb-4 p-2">@Session["SuccessMsg"]</div>
            Session["SuccessMsg"] = null;
        }
        @if (Session["ErrorMsg"] != null)
        {
            <div class="alert-danger mb-4 p-2">@Session["ErrorMsg"]</div>
            Session["ErrorMsg"] = null;
        }
        <div class="form_panel bg-l-gray p-4 box-shadow">
            <h3 class="heading mb-4 pl-3">Grievance Booking</h3>
            <form action="" enctype="multipart/form-data" id="PortsGmsGrievanceBookingForm" method="post">
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <div class="form-group">
                            <label>@GrievanceNature["Title"]<span class="required">*</span></label>
                            <select class="form-control" name="Nature" required id="Nature">
                                <option>Select..</option>
                                @foreach (var element in Nature.GetChildren().ToList())
                                {
                                    var childCount = element.GetChildren().Count();
                                    //if (childCount != 0 && element.Fields["Key"].Value == Model.Nature)
                                    if (childCount != 0)
                                    {

                                        foreach (var child in element.GetChildren().ToList())
                                        {

                                            <option value="@Html.Sitecore().Field("Key", child)">@Html.Sitecore().Field("Key", child)</option>
                                        }
                                    }
                                    else
                                    {
                                        <option value="@Html.Sitecore().Field("Key", element)">@Html.Sitecore().Field("Key", element)</option>

                                    }

                                }
                            </select>
                            @Html.ValidationMessageFor(x => x.Nature, "", new { @class = "required" }, "p")
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6">
                        <div class="form-group">
                            <label>@GrievanceLocation["Title"]<span class="required">*</span></label>
                            <select class="form-control" name="Location" required id="Location">
                                <option>Select..</option>
                                @foreach (var element in Location.GetChildren().ToList())
                                {
                                    var childCount = element.GetChildren().Count();
                                    if (childCount != 0)
                                    {

                                    }
                                    else
                                    {
                                        <option value="@Html.Sitecore().Field("Title", element)">@Html.Sitecore().Field("Title", element)</option>

                                    }

                                }
                            </select>
                            @Html.ValidationMessageFor(x => x.Location, "", new { @class = "required" }, "p")
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 col-md-6">
                        <div class="form-group">
                            <label>@Subject["Title"]<span class="required">*</span></label>
                            <input type="text" class="form-control" name="Subject" required minlength="50" id="Subject" autocomplete="off" placeholder="">
                            @Html.ValidationMessageFor(x => x.Subject, "", new { @class = "required" }, "p")
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <div class="form-group">
                            <label>@GrievanceCompany["Title"]<span class="required">*</span></label>
                            <select class="form-control" name="Company" required id="Company">
                                <option>Select..</option>
                                @foreach (var element in Company.GetChildren().ToList())
                                {
                                    var childCount = element.GetChildren().Count();
                                    if (childCount != 0)
                                    {

                                    }
                                    else
                                    {
                                        <option value="@Html.Sitecore().Field("Title", element)">@Html.Sitecore().Field("Title", element)</option>

                                    }

                                }
                            </select>
                            @Html.ValidationMessageFor(x => x.Company, "", new { @class = "required" }, "p")
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6">
                        <div class="form-group">
                            <label>@GrievanceWhoImpacted["Title"]<span class="required">*</span></label>
                            <select class="form-control" name="WhoImpacted" required id="WhoImpacted">
                                <option>Select..</option>
                                @foreach (var element in WhoImpacted.GetChildren().ToList())
                                {
                                    var childCount = element.GetChildren().Count();
                                    if (childCount != 0)
                                    {

                                    }
                                    else
                                    {
                                        <option value="@Html.Sitecore().Field("Title", element)">@Html.Sitecore().Field("Title", element)</option>

                                    }

                                }
                            </select>
                            @Html.ValidationMessageFor(x => x.WhoImpacted, "", new { @class = "required" }, "p")
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <div class="form-group">
                            <label for="">@GrievanceInbrief["Title"]</label>
                            <textarea class="" name="Brief" required minlength="50" id="Brief" rows="4" cols="55"></textarea>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6">
                        <div class="form-group">
                            <label for="">@Attachment["Title"]</label>
                            <input type="file" class="form-control-file p-1" name="File" id="Attachment">
							<input type="hidden" name="SubmitGcptchares" class="g-SubmitGcptchares-res" /> 
                        </div>
                    </div>
                </div>

                 <div class="row">
                    <div class="col-lg-12 mt-3 text-right">
                        <button class="btn btn-gradient" type="button" id="portsSubmit" data-sitekey="6Lfwlk8mAAAAADm4UhICQR0KxNZKWC_3TwNpDlEm"
                                data-callback='onSubmit' data-action='submit'>
                            <span>Submit</span>
                        </button>                                               
                        <a href="@Link" class="btn btn-dark">Close</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>