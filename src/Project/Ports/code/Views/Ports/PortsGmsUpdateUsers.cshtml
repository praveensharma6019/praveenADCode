@using Sitecore.Foundation.Dictionary.Extensions
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.ExperienceForms.Mvc.Html
@using Sitecore.Mvc.Configuration
@using Sitecore.Mvc
@model Sitecore.Ports.Website.Models.PortsGMSUpdateUsers
@using Sitecore.Ports.Website.Models
@{
    /**/


    var Department = Sitecore.Context.Database.GetItem("{39DA8970-3944-4F15-9A7D-7E9157ACB4F2}");
    var Role = Sitecore.Context.Database.GetItem("{1B5C8C51-E533-449F-A06B-F96F58011CE7}");
    var Title = Sitecore.Context.Database.GetItem("{76273070-C57B-4589-9C56-E8941677865A}");
    var item = Sitecore.Context.Database.GetItem(PortsGMSTemplates.Grievance.GrievanceAdminDashbord);
    var Homelink = item.Url();

    var item1 = Sitecore.Context.Database.GetItem(PortsGMSTemplates.Grievance.GrievanceManageUser);
    var link = item1.Url();
}
@if (Model.GMSRegisterdUsers != null)
{
    <section class="breadcrumb-sub-layout bg-white  pt-5 pb-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <ul class="breadcrumb-sublayout-ul">
                        <li><a href="@Homelink">Home</a></li>
                        <li>Update User</li>
                    </ul>
                </div>
                <div class="col-lg-6 text-right">
                    <p class="user_logout"><a href="/Grievance/Logout"><span class="fa fa-sign-out mr-2"></span>Logout</a></p>
                </div>
            </div>
        </div>
    </section>
    <section class="pb-5 bg-white">
        <div class="container">
            @if (Session["SuccessMsg"] != null)
            {
                <div class="alert-success mb-4 p-2">@Session["SuccessMsg"]</div>
                Session["SuccessMsg"] = null;
            }
            @if (Session["ErrorMsg"] != null)
            {
                <div class="alert-danger mb-4 p-2">@Session["ErrorMsg"]</div>
                Session["ErrorMsg"] = null;
            }
            <div class="form_panel bg-l-gray p-4 box-shadow">
                <h3 class="heading mb-4 pl-3">Update User(@Model.GMSRegisterdUsers.Name)</h3>
                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form-add-users", id = "form-add-users" }))
                {

                    <div class="row">
                        @{
                            string name = Model.GMSRegisterdUsers.Name.ToString();
                            string[] names = name.Split(' ');
                        }
                        <div class="col-lg-3 col-6 col-sm-4">
                            <div class="form-group">
                                @*<select name="Title" required class="form-control" id="Title" disabled>
                                        @foreach (var element in Title.GetChildren().ToList())
                                        {
                                            var childCount = element.GetChildren().Count();
                                            if (childCount != 0)
                                            {
                                                <option></option>
                                            }
                                            else
                                            {
                                                <option value="@Html.Sitecore().Field("Title", element)">@Html.Sitecore().Field("Title", element)</option>

                                            }
                                        }
                                    </select>*@
                                @Html.TextBox("Title", @names.GetValue(0), new { @class = "form-control", id = "Title", required = "required", placeholder = "Title", disabled = "disabled" })
                                @* @Html.ValidationMessageFor(x => x.Title, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="form-group">

                                @Html.TextBox("first_name", @names.GetValue(1), new { @class = "form-control", id = "FirstName", placeholder = "First Name", disabled = "disabled" })
                                @* @Html.ValidationMessageFor(x => x.first_name, "", new { @class = "required" }, "p")*@

                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="form-group">
                                @Html.TextBox("middle_name", @names.GetValue(2), new { @class = "form-control", id = "MiddleName", placeholder = "Middle Name", disabled = "disabled" })
                                @*@Html.ValidationMessageFor(x => x.middle_name, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="form-group">
                                @Html.TextBox("last_name", @names.GetValue(3), new { @class = "form-control", id = "LastName", required = "required", placeholder = "Last Name", disabled = "disabled" })
                                @* @Html.ValidationMessageFor(x => x.last_name, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="form-group">
                                <label>Location</label>
                                @Html.TextBox("Location", @Model.GMSRegisterdUsers.Location, new { @class = "form-control", id = "Location", required = "required", placeholder = "Location", disabled = "disabled" })
                                @* @Html.ValidationMessageFor(x => x.Location, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="form-group">
                                <label>Department</label>
                                @Html.TextBox("Department", @Model.GMSRegisterdUsers.Department, new { @class = "form-control", id = "Department", required = "required", placeholder = "Department", disabled = "disabled" })
                                @* @Html.ValidationMessageFor(x => x.Department, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="form-group">
                                <label>Email</label>
                                @Html.TextBox("Email", @Model.GMSRegisterdUsers.Email, new { @class = "form-control", id = "Email", required = "required", placeholder = "Email", disabled = "disabled" })
                                @* @Html.ValidationMessageFor(x => x.Email, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="form-group">
                                <label>Mobile</label>
                                @Html.TextBox("Mobile", @Model.GMSRegisterdUsers.Mobile, new { @class = "form-control", id = "Mobile", required = "required", placeholder = "Mobile", disabled = "disabled" })
                                @* @Html.ValidationMessageFor(x => x.Mobile, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="form-group">
                                <label>Role</label>
                                <select name="User_Type" class="form-control" id="User_Type" disabled>
                                    <option value="level1" @{ var lSel1 = Model.GMSRegisterdUsers.User_Type == "level1" ? "selected" : ""; } @lSel1>Level1</option>
                                    <option value="level2" @{ var lSel2 = Model.GMSRegisterdUsers.User_Type == "level2" ? "selected" : ""; } @lSel2>Level2</option>
                                    <option value="level3" @{ var lSel3 = Model.GMSRegisterdUsers.User_Type == "level3" ? "selected" : ""; } @lSel3>Level3</option>
                                    <option value="sustainability" @{ var lSelSus = Model.GMSRegisterdUsers.User_Type == "sustainability" ? "selected" : ""; } @lSelSus>Sustainability Cell</option>

                                </select>
                                @* @Html.ValidationMessageFor(x => x.User_Type, "", new { @class = "required" }, "p")*@
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="form-group">
                                <label>Status</label>
                                <select name="Status" class="form-control" id="Status">
                                    <option value="true" @{ var aSel1 = Model.GMSRegisterdUsers.Status == true ? "selected" : ""; } @aSel1>Active</option>
                                    <option value="false" @{ var aSel2 = Model.GMSRegisterdUsers.Status == false ? "selected" : ""; } @aSel2>InActive</option>
                                </select>
                                @Html.ValidationMessageFor(x => x.Status, "", new { @class = "required" }, "p")
                            </div>
                        </div>

                    </div>
                    <div class="col-lg-12 mt-3 text-right">
                        <input type="hidden" name="Id" value="@Model.GMSRegisterdUsers.Id" />
                        <button type="submit" class="btn btn-gradient">Save</button>
                        <a href="@link" class="btn btn-dark">Close</a>
                    </div>
                }
            </div>
        </div>
    </section>
}
else
{
    <section class="pb-5 bg-white">
        <div class="container">
            <div class="alert-danger mb-4 p-2">User does not exist.</div>
        </div>
    </section>
}
