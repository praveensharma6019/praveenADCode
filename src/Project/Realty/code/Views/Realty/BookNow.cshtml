@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Mvc.Presentation
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@using Sitecore.Realty.Website
@using System.Web.Mvc;
@model Sitecore.Realty.Website.Model.PropertyCollection


@{
    /**/

    var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
    var models = Sitecore.Context.Database.GetItem(datasource);
    string dataValidity = Session["Message"] != null ? Session["Message"].ToString() : string.Empty;
    int count = 0;
}
<!-- Tab panes -->

@using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { id = "formRealtyBookNow", @class = "form-signin", enctype = "multipart/form-data" }))
{
    @Html.AddUniqueFormId()
    @Html.AntiForgeryToken()
    <div class="tab-content">
        <div class="tab-pane active" id="home">
            <button class="d-md-none d-block" data-toggle="collapse" data-target="#choose-home"><i>1</i>Select Your Home</button>
            <div class="collapse show bg-white" id="choose-home">
                <div class="p-4 bg-grey">
                    <div class="row px-lg-4">
                        <div class="col-lg-4 col-md-6"><h3>Select Project</h3></div>
                        <div class="col-lg-4 col-md-6">
                            <div class="form-group mb-0">
                                @Html.DropDownListFor(m => m.PropertyCode, new SelectList(Model.PropertyCollectionLists, "PropertyCode", "PropertyName"), new { @class = "form-control", id = "PropertyName", required = "required" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-3" id="business-parent">
                    @for (var i = 0; i < Model.PropertyCollectionLists.Count; i++)
                    {
                        string disp = "";
                        var propertynam = Model.PropertyCollectionLists[i].PropertyCode;
                        var formatedType = propertynam.Replace(" ", "-");
                        if (dataValidity == "notValid")
                        {
                            if (propertynam != Model.PropertyCode)
                            {
                                disp = "display: none;";
                            }
                        }
                        else
                        {
                            if (i != 0)
                            {
                                disp = "display: none;";
                            }
                        }

                        <div class="row border-bottom py-lg-4" id="@formatedType" style="@disp">

                            <div class="col-lg-3 col-md-3 p-3 px-lg-5 border-right-lg">
                                <div class="property-booking__logo">
                                    <img src="@Model.PropertyCollectionLists[i].PropertyLogo" class="img-fluid">
                                </div>
                            </div>
                            <div class="col-lg-5 col-md-9 p-3 p-lg-5 border-right-lg">
                                <ul class="location-filter">
                                    <li class=""><i><img src="../../images/pin-location.svg"></i><p> @Model.PropertyCollectionLists[i].PropertyAddress</p></li>
                                </ul>
                            </div>
                            <div class="col-lg-4">
                                <div class="px-lg-5 py-3 configuration">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-6 col-sm-6">
                                            <div class="row mb-3">
                                                <div class="col-3"><img src="../../images/carpet-area.svg" class="img-fluid py-2"></div>
                                                <div class="col-9">
                                                    <h5>Configuration</h5>
                                                    <p> @Model.PropertyCollectionLists[i].PropertyConfiguration</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-6 col-sm-6">
                                            <div class="row">
                                                <div class="col-3"><img src="../../images/property-status.svg" class="img-fluid py-2"></div>
                                                <div class="col-9">
                                                    <h5>Possession</h5>
                                                    <p> @Model.PropertyCollectionLists[i].PropertyPossession</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    }
                </div>
                <div class="px-lg-5 py-5 p-3" id="business-parents">
                    @if (dataValidity == "notValid")
                    {
                        @Html.Partial("BookNowPropertyTypes")
                    }
                    else
                    {
                        if (Model.PropertyCollectionLists.Count > 0)
                        {
                            var propertynam = Model.PropertyCollectionLists[0].PropertyCode;
                            var formatedType = propertynam.Replace(" ", "-");
                            <div class="row property-details" id="@formatedType-details">
                                <div class="col-lg-6 mr-auto mb-4 col-md-6 col-sm-6">
                                    <div class="row">
                                        <div class="col-lg-5">
                                            <label>Select Apartment Type</label>
                                        </div>
                                        <div class="col-lg-6 mr-auto">
                                            <div class="form-group">
                                                @Html.DropDownListFor(m => m.PropertyType, new SelectList(Model.PropertyCollectionLists[0].PropertyTypes, "PropertySelection", "PropertySelection"), new { @class = "form-control propertyselections", id = "PropertyType", required = "required" })

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-6 ml-auto mb-4 col-md-6 col-sm-6 propertytype">
                                    <div class="row">
                                        <div class="col-lg-5 ml-auto">
                                            <label>Starting Price</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <p id="StartingPrice"><i class="fa fa-rupee-sign mr-2"></i>@Model.PropertyCollectionLists[0].PropertyTypes[0].BookingPrice</p>
                                            <h5>*Statutory Charges, Taxes (if any), & Charges for Society Maintenance shall be extra</h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 mr-auto mb-4 col-md-6 col-sm-6 propertytype">
                                    <div class="row">
                                        <div class="col-lg-5">
                                            <label>RERA Carpet Area</label>
                                        </div>
                                        <div class="col-lg-6 mr-auto">
                                            <div class="form-group">
                                                <p id="CarpetArea">@Model.PropertyCollectionLists[0].PropertyTypes[0].CarpetArea</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 ml-auto mb-4 col-md-6 col-sm-6 propertytype">
                                    <div class="row">
                                        <div class="col-lg-5 ml-auto">
                                            <label>Booking Amount</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <p id="BookingAmount"><i class="fa fa-rupee-sign mr-2"></i>@Model.PropertyCollectionLists[0].PropertyTypes[0].BookingAmount</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                        <div class="row mt-4">
                            <div class="col-md-12 text-sm-right text-center">
                                <a data-toggle="tab" class="btn btn-primary mb-3 mb-sm-0 btnNext">
                                    Enter Your Details
                                    <i class="fa fa-angle-right ml-2"></i>
                                </a>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="menu1">
            <button class="d-md-none d-block collapsed" data-toggle="collapse" data-target="#your-details"><i>1</i>Enter Your Details</button>
            <div class="collapse" id="your-details">
                <input type="hidden" name="FormName" id="FormName" value="Book-Now">
                <input type="hidden" name="pageInfo" id="pageInfo" value="/Book-Now">
                <div class="px-lg-4 py-5 p-3 personal-details">
                    <div class="row">
                        <div class="col-md-6 px-lg-5 mr-auto mb-4" style="display:none">
                            <div class="form-group">
                                <label for="">Type of Channel Partner</label>
                                <select class="form-control" id="cChannelPartner">
                                    <option>Select</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 ml-auto mb-4" style="display:none">
                            <div class="form-group">
                                <label for="">From where you know about us</label>
                                <select class="form-control" id="cFromDetails">
                                    <option>Select</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">First Name</label>
                                @Html.TextBoxFor(x => x.FirstName, new { @class = "form-control text-uppercase", required = "required" })
                                @Html.ValidationMessageFor(x => x.FirstName, "", new { @class = "help-block" }, "p")
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">Last Name</label>
                                @Html.TextBoxFor(x => x.LastName, new { @class = "form-control text-uppercase", required = "required" })
                                @Html.ValidationMessageFor(x => x.LastName, "", new { @class = "help-block" }, "p")
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">PAN No.</label>
                                @Html.TextBoxFor(x => x.PanNumber, new { @class = "form-control text-uppercase", required = "required",
                               onkeyup = "var start = this.selectionStart; var end = this.selectionEnd; this.value = this.value.toUpperCase(); this.setSelectionRange(start, end);"
                                })
                                @Html.ValidationMessageFor(x => x.PanNumber, "", new { @class = "help-block" }, "p")
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">Aadhar Number</label>
                                @Html.TextBoxFor(x => x.AadharNumber, new { @class = "form-control", required = "required" })
                                @Html.ValidationMessageFor(x => x.AadharNumber, "", new { @class = "help-block" }, "p")
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">Email Address</label>
                                @Html.TextBoxFor(x => x.EmailAddress, new { @class = "form-control", required = "required" })
                                @Html.ValidationMessageFor(x => x.EmailAddress, "", new { @class = "help-block" }, "p")
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">Mobile Number</label>
                                @Html.TextBoxFor(x => x.Mobile, new { @class = "form-control", required = "required" })
                                @Html.ValidationMessageFor(x => x.Mobile, "", new { @class = "help-block" }, "p")
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">Country</label>
                                <select class="form-control" id="Country" name="Country">
                                    <option value="">Select Country</option>
                                    <option value="IN">India</option>
                                    <option value="AU">Australia</option>
                                    <option value="CA">Canada</option>
                                    <option value="BR">Brazil</option>
                                    <option value="CN">China</option>
                                    <option value="DE">Germany</option>
                                    <option value="GB">United Kingdom</option>
                                    <option value="IE">Ireland</option>
                                    <option value="IT">Italy</option>
                                    <option value="MX">Mexico</option>
                                    <option value="US">United States</option>
                                    <option value="Others">Others</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">State / Province</label>
                                <select class="form-control" id="State" name="State">
                                    <option value="">Select State</option>

                                </select>
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">City</label>
                                @Html.TextBoxFor(x => x.City, new { @class = "form-control", required = "required" })
                                @Html.ValidationMessageFor(x => x.City, "", new { @class = "help-block" }, "p")
                            </div>
                        </div>
                        <div class="col-md-6 px-lg-5 mb-4">
                            <div class="form-group">
                                <label for="">Remarks</label>
                                @Html.TextArea("Remarks", null, new { @class = "form-control", rows = "3" })
                            </div>
                        </div>
                        <div class="form-group ml-4">
                            <p class="txt-orange" id="docErrorMessage"></p>
                        </div>
                        <div class="col-lg-12 mb-3">
                            <div class="form-check">
                                <input type="checkbox" name="termsCb1" class="form-check-input" id="termsCb1">
                                <label class="form-check-label mb-2" for="termsCb1">I/We am/are fully aware that the Total Sale Consideration payable by me/us in respect of the applied Unit is as per the Cost Sheet shared with me/us by the Sales Manager, which has been explained to me/us . As discussed and agreed, I/we agree to make payments for the Unit applied for in accordance with the payment schedule shared with me/us as part of the cost sheet by the Sales Manager. I/We further declare that I/we have a copy of the aforementioned cost sheet in my/our custody and I am/we are aware of my/our responsibilities of timely payments and my/our liability to pay Interest, charges in case of delayed payment from my/our end.</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="termsCb2" class="form-check-input" id="termsCb2">
                                <label class="form-check-label mb-2" for="termsCb2">I/We have fully read and understood the Terms and Conditions attached in the application form and do hereby solemnly agree, undertake and covenant to abide and be bound by them.</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="termsCb3" class="form-check-input" id="termsCb3">
                                <label class="form-check-label mb-2" for="termsCb3">I/We have sought detailed explanations and clarifications and after giving careful consideration to all facts, Terms and Conditions, I/We have signed  the  Application  Form  and  remitted  the  amount  payable  thereof  being  fully  conscious  of  my/our  rights,  liabilities  and obligations.</label>
                            </div>
                        </div>
                        @*<div class="col-lg-12 mb-3 px-lg-5">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                    <label class="form-check-label" for="defaultCheck1">
                                        I Agree
                                    </label>
                                </div>
                            </div>*@
                        <div class="col-md-12 px-lg-5 text-lg-right">
                            <button type="submit" class="btn btn-primary mb-3 mb-sm-0" name="MakePayment" id="MakePayment" value="MakePayment">Make Payment <i class="fa fa-angle-right ml-2"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="menu2">
            <button class="d-md-none d-block" data-toggle="collapse" data-target="#make-payment"><i>1</i>Make Payment</button>
            <div class="collapse show bg-white" id="make-payment">
            </div>
        </div>
    </div>

}

