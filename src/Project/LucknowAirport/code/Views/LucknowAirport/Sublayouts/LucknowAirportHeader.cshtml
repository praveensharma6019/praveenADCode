@using Sitecore
@using Sitecore.Mvc.Presentation
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Data.Fields
@using Sitecore.Data.Items
@using Sitecore.AdaniCapital.Website.Helper
@model Sitecore.Mvc.Presentation.RenderingModel
@{
    /**/

    var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
    var model = Sitecore.Context.Database.GetItem(datasource);
    var TBLogo = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.Parameters.Where(x => x.Key == "TBLogo").FirstOrDefault().Value;
	
	var ShopAndDine = Sitecore.Context.Database.GetItem("{C6A74E83-2E96-44A2-9C99-33CA7434CAD4}");
	var ShopAndDineTerminalMap = Sitecore.Context.Database.GetItem("{40FD58B0-A994-45B3-92D8-E5C48FF0B3D1}");
	
	var AirportService = Sitecore.Context.Database.GetItem("{8D61756D-A4EB-43BA-A691-B481BB9CC5AB}");
	var AirportServiceImage = Sitecore.Context.Database.GetItem("{131F6C15-E832-4499-8A07-4D4EBAF8C0C6}");
	var AirportServiceOtherService = Sitecore.Context.Database.GetItem("{DB4FC977-3C66-46EE-A36B-2788666DFC95}");
	var AirportServiceTerminalMap = Sitecore.Context.Database.GetItem("{FBAD3DA8-4EDC-4CA5-8111-33D70342A258}");
	var OtherServiceCOunt =0;
	var OtherServiceCOunt1 =0;	
	
	var flight = Sitecore.Context.Database.GetItem("{CCF1AA8D-B0A7-4714-9706-83AF8D60612D}");
	
	var PG = Sitecore.Context.Database.GetItem("{EEDB44D0-049B-4F44-86FB-29FB5BEBB834}");
	
	var Transport = Sitecore.Context.Database.GetItem("{40FDEDD6-A070-4E79-B361-BBEE10FF7806}");
	
	var Arrival = Sitecore.Context.Database.GetItem("{2B116FF1-A435-4DAD-882F-3F7C404799D9}");
	var ArrivalContent = Sitecore.Context.Database.GetItem("{7BFDFDCE-58D2-42E2-8264-C0D5B19F584A}");
	var Departure = Sitecore.Context.Database.GetItem("{D5C3026A-9A74-4C80-81B2-E44551A62FDF}");
	var DepartureContent = Sitecore.Context.Database.GetItem("{861388DD-09E3-447A-A119-97D6BBFCBB13}");
	var Transfer = Sitecore.Context.Database.GetItem("{0898B589-DA80-4D13-9C42-E8E4457FD5ED}");
	var TransferContent = Sitecore.Context.Database.GetItem("{A95B9567-B4B3-434E-BF4D-04EA06E6B96C}");
	var PGTerminalMap = Sitecore.Context.Database.GetItem("{8903BA7C-BAA0-4E62-87FA-878A3AE503D7}");
	var PGFAQ = Sitecore.Context.Database.GetItem("{3B58A86C-EA3C-456A-9F3E-CAB969C7C0D0}");
	
	var pageUrl = System.Web.HttpContext.Current.Request.Url;
	var url = "#";
	var test= "";
	var menu = Sitecore.Context.Database.GetItem("{F7CD9B00-8877-4141-B0DE-B7369A41BEC2}");
	  var activeClass ="active";
	  
	var modelBusinessMenu = Sitecore.Context.Database.GetItem("{966865B6-0C56-412C-92D1-EBCA1830BC68}");
	var imgurls = Helper.ImageUrl("Image", modelBusinessMenu);
	  
	var elementCallInfo = Sitecore.Context.Database.GetItem("{CA20B589-C995-454D-A2E9-01CA5A3839B3}");

	string CurrentURLs = Request.RawUrl;

}

@if(CurrentURLs.Contains("/ccsia-lucknow-airport"))
{
menu = Sitecore.Context.Database.GetItem("{4CE677C7-9C57-4EF2-9926-FAB8F77C6B18}");
}


<div class="navPanel">
<div class="header--top_bar">
<div class="container-fluid">
<div class="d-flex">

	@if (elementCallInfo != null)
{
    var ImgURL = Helper.ImageUrl("Image", elementCallInfo);
<div class="contact_info">
    <img src="@ImgURL" alt="Call" />
   
    
        @for(int i = 0; i < elementCallInfo.GetChildren().Count; i++)
        {
            @elementCallInfo.GetChildren()[i]["Title"] @Html.Raw(elementCallInfo.GetChildren()[i]["Text"])
        }
    

</div>
}
	
	<div class="top_bar_nav">
		<a href="#businesses">
            <img src="@imgurls" alt="Business" /> @Html.Sitecore().Field("Text", modelBusinessMenu)
        </a>
		<div class="business_dropdown">
					@foreach (Item item in modelBusinessMenu.GetChildren().ToList())
						{
							var subItemModel = Sitecore.Context.Database.GetItem(item.ID);
							var childCount = subItemModel.GetChildren().Count();
							
							
							
							if (childCount > 0)
							{
								foreach (Item subItem in subItemModel.GetChildren().ToList())
								{
									
									var linkurl = Helper.LinkUrl(subItem.Fields["LinkUrl"]);
									var imgurl = Helper.ImageUrl("LinkImage", subItem);
									if (!string.IsNullOrWhiteSpace(imgurl))
									{
										<a href="@linkurl" class="@Html.Sitecore().Field("Class", subItem)" target="_blank">
											<i><img src="@imgurl" alt="@Html.Sitecore().Field("Title", subItem)"> </i>
											<label>@Html.Sitecore().Field("Title", subItem)</label>
										</a>

									}

								}
							}
						}
			</div>
		
				
	</div>
	
	
        
</div>
</div>
</div>



	<div class="container-fluid navtopbar">
	 <nav class="navbar navbar-expand-lg navbar-light">
      <a class="navbar-brand" href="/ccsia-lucknow-airport">
	  <div class="row">
		<div class="col-sm-4 col-5">
		
			<img src="-/media/A0174C0E2F704302B286D1DA3C6E0024.ashx" alt="Adani Airports">
				<img src="-/media/C44A3E551A5747ADA6DA464BC51B7EE4.ashx" alt="Adani Airports">
		</div>
		<div class="col-sm-8 col-7">
			<p>Lucknow<span class="d-block">Chaudhary Charan Singh<br> International Airport</span></p>
		</div>
	  </div>
	  </a>
      <div class="navbar-collapse collapse" id="mainMenu" style="">
		<span class="nav-close"></span>
        <ul class="navbar-nav mx-auto primaryMenu">
		@foreach (var element in menu.GetChildren().ToList())
		{
		var childCount = element.GetChildren().Count();
		if(childCount != 0)
		{
		<li class="@childCount nav-item dropdown @activeClass">
			@Html.Sitecore().BeginField("Link", element, new { haschildren = true, @class = "nav-link" })

															 @Html.Sitecore().Field("NavigationTitle", element)
                                                        
                                                        @Html.Sitecore().EndField()
														
			 
		
		
			<span class="fa fa-angle-down"></span>
		<div class="dropdown-menu megamenu">
			<ul>
					@foreach (var subMenu in element.GetChildren().ToList())
														{
															
															<li class="dropdown-item">
															@Html.Sitecore().BeginField("Link", subMenu, new { haschildren = true, @class = "dropdown-item" })

															 @Html.Sitecore().Field("NavigationTitle", subMenu) 
                                                        
                                                        @Html.Sitecore().EndField()
															</li>
														}														
															
			</ul>
			
            </div>
          </li>
		}
		else{
		<li class="@childCount nav-item">
			@Html.Sitecore().BeginField("Link", element, new { haschildren = true, @class = "nav-link" })

															 @Html.Sitecore().Field("NavigationTitle", element)
                                                        
                                                        @Html.Sitecore().EndField()
														  </li>
														
		}
		activeClass = "";
		}
		
		
        </ul>
		
		<div class="nav_cta d-lg-none d-block">
			<ul>
			@if(CurrentURLs.Contains("/ccsia-lucknow-airport"))
			{
			<li><a href="/ccsia-lucknow-airport/services"><img src="-/media/21836FD4235E4031A4A085975913D4E3.ashx"><span>Check-out Services</span></a></li>
			<li><a href="/ccsia-lucknow-airport/contact-us?na=Suspicious"><img src="-/media/0941E1DE111C4693B24329DBDA9CB9D6.ashx"><span>Report Suspicious</span></a></li>
			}
			else
			{
			 <li><a href="/AirportService"><img src="-/media/21836FD4235E4031A4A085975913D4E3.ashx"><span>Check-out Services</span></a></li>
			 <li><a href="/Contactus?na=Suspicious"><img src="-/media/0941E1DE111C4693B24329DBDA9CB9D6.ashx"><span>Report Suspicion</span></a></li>
			}
			</ul>
		</div>
      </div>
	  
	   <ul class="primarymenu ml-auto">
		<li class="user-login d-none"><a href="#" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="17.5" height="19.5" viewBox="0 0 17.5 19.5"><defs></defs><g transform="translate(-3.25 -2.25)"><path class="a" d="M20,21V19a4,4,0,0,0-4-4H8a4,4,0,0,0-4,4v2"/><circle class="a" cx="4" cy="4" r="4" transform="translate(8 3)"/></g></svg></a></li>
		<li class="weather-plugin"><a href="#" class="nav-link"><span id="tempInfo"></span><img src="-/media/2374C10805614E11941FD17EB9ACC1D1.ashx"></a></li>
		<li class="search" id="search-toggle"><a href="#" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="19.811" height="19.811" viewBox="0 0 19.811 19.811"><defs></defs><g transform="translate(-2.25 -2.25)"><circle class="a" cx="8" cy="8" r="8" transform="translate(3 3)"/><line class="a" x1="4.35" y1="4.35" transform="translate(16.65 16.65)"/></g></svg></a>
		<div class="search-container">
    <div class="container-fluid">
        <form class="search-container__form">
			<div class="form-group mb-3 wrapper">
			  <input type="text" class="form-control" placeholder="Search" id="SearchBox" aria-label="">
				<button type="button" onclick="Search()" value="X" id="SearchBtn"><svg xmlns="http://www.w3.org/2000/svg" width="19.811" height="19.811" viewBox="0 0 19.811 19.811"><defs></defs><g transform="translate(-2.25 -2.25)"><circle class="a" cx="8" cy="8" r="8" transform="translate(3 3)"></circle><line class="a" x1="4.35" y1="4.35" transform="translate(16.65 16.65)"></line></g></svg></button>
			</div>
		</form>
<div class="search-container__results"> 
    <p>Popular Searches</p> 
     <ul id="SearchResult"> 
	 @if(CurrentURLs.Contains("/ccsia-lucknow-airport"))
	 {
          <li><a href="/ccsia-lucknow-airport/passenger-guide">Passenger Guide</a></li> 
        <li><a href="/ccsia-lucknow-airport/shop-and-dine/lounge">Place to Relax</a></li>
        <li><a href="/ccsia-lucknow-airport/transport">Cab Services</a></li> 
         <li><a href="/ccsia-lucknow-airport/shop-and-dine/outlets">Duty Free & Shopping</a></li> 
        <li><a href="/ccsia-lucknow-airport/services/lost-and-found">Lost and Found</a></li> 
		}
		else
		{
		  <li><a href="/PassangerGuide">Passenger Guide</a></li> 
        <li><a href="/ShopAndDine/Relax">Place to Relax</a></li>
        <li><a href="/Transport">Cab Services</a></li> 
         <li><a href="/ShopAndDine/Shop">Duty Free & Shopping</a></li> 
        <li><a href="/AirportService/LostandFound">Lost and Found</a></li> 
		}
     </ul> 
 </div>
</div>
</div>
		</li>
		<li class="toggle_nav"><button class="navbar-toggler d-block" id="nav-button" type="button" data-toggle="collapse" data-target="#mainMenu" aria-expanded="false" aria-label="Toggle navigation">
		<span></span>
		<span></span>
		<span></span>
      </button></li>
	  </ul>
	 
    </nav>
	</div>
	</div>
	
	
	<script src="/scripts/LucknowAirport/jquery.min.js"></script>
<script>

    $('#SearchBox').keypress(function (event) {
       // event.preventDefault();
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
			if (window.location.href.indexOf("ccsia-lucknow-airport") > -1)
			{
            window.location.href ="/ccsia-lucknow-airport/search-result?key=" +  $('#SearchBox').val();
			}
			else
			{
            window.location.href ="/searchresult?key=" +  $('#SearchBox').val();			
			}
			event.preventDefault();
        }

    });

 function SearchRedirect()
 {
			if (window.location.href.indexOf("ccsia-lucknow-airport") > -1)
			{
            window.location.href ="/ccsia-lucknow-airport/search-result?key=" +  $('#SearchBox').val();
			}
			else
			{
            window.location.href ="/searchresult?key=" +  $('#SearchBox').val();			
			}
			event.preventDefault();

 }

    function Search() {
      //  $('#SearchBtn').submit();
	if($('#SearchBox').val().trim()=="")		
		return false;
		
      //  $('#SearchBtn1').submit();
		if (window.location.href.indexOf("ccsia-lucknow-airport") > -1)
			{
            window.location.href ="/ccsia-lucknow-airport/search-result?key=" +  $('#SearchBox').val();
			}
			else
			{
            window.location.href ="/searchresult?key=" +  $('#SearchBox').val();			
			}
		return false
		
        var itemId = $('#SearchBox').val();
        $.ajax({
            method: "POST",
            data: { itemId: itemId },
            url: "/api/LucknowAirport/GetSearchResult",
            context: this,
            success: function (objects) {
                // alert("s1");
                console.log(objects);
                $('#SearchResult').html('');
                var html = "";

                for (var i = 0; i < objects.length; i++) {
                    var value = objects[i]["Value"];
                    if (value.indexOf("New Local Datasource Folder") > 0) {

                    }
                    else {
                        if (value.indexOf("ccsia-lucknow-airport/Home") > 0)
                            value = "/" + value.replace("/ccsia-lucknow-airport/Home/", "");

                        html = html + " <li><a href='" + value + "'>" + objects[i]["Key"] + "</a></li>";}
                }
                $('#SearchResult').html(html);
                return false;

            }
        });

    }


		
</script>

