@using Sitecore.Mvc
@using Sitecore.Mvc.Presentation
@using Sitecore.Data.Items
@model RenderingModel
@{
    Item currentItem = RenderingContext.Current.Rendering.Item;
    var i = 0;
}

@if (currentItem != null)
{
<div class="subSection scrollableOffset" id="@currentItem.DisplayName">
    <div itemscope itemtype="http://schema.org/FAQPage">
        <h2 auto_id="@Html.Sitecore().Field("AutoId", currentItem)">@Html.Sitecore().Field("__Short description", currentItem)</h2>
        <div class="accordion" id="accordionExample">

            @foreach (Item faqItem in currentItem.Children)
            {
                <div class="accordion-item" itemscope="" itemProp="mainEntity" itemType="https://schema.org/Question">
                    <div itemprop="name" class="accordion-header" id="heading@(i)" auto_id="data_question_text_@(i)">
                        <button class="accordion-button collapsed"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#collapse@(i)"
                                aria-expanded="false"
                                aria-controls="collapse@(i)"
                                auto_id="@Html.Sitecore().Field("AutoId", faqItem)">
                            <span auto_id=@Html.Sitecore().Field("AutoIdQ", faqItem)>
                                @Html.Sitecore().Field("Question", faqItem)
                            </span>
                        </button>

                        <div id="collapse@(i)"
                             class="accordion-collapse collapse"
                             aria-labelledby="heading@(i)"
                             data-bs-parent="#accordionExample">
                            <div itemProp="acceptedAnswer" itemscope="" itemType="https://schema.org/Answer">
                                <div class="accordion-body" itemProp="text" auto_id="data_answer_text_@(i)">
                                    <span auto_id=@Html.Sitecore().Field("AutoIdA", faqItem)>
                                        @Html.Sitecore().Field("Answer", faqItem)
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                i++;
            }
        </div>
        @Html.Sitecore().Field("__Help link", currentItem)
    </div>
</div>
}
