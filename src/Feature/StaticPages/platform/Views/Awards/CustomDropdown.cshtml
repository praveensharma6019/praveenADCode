@using Sitecore.Mvc
@using Sitecore.Mvc.Presentation
@using Sitecore.Data.Items
@model RenderingModel
@{ Item currentItem = RenderingContext.Current.Rendering.Item;
    var i = 1;
    var collapsed = string.Empty;
    var collapse = string.Empty;
}

@if (currentItem != null)
{
    <div class="midSection">
        <section class="fnb_section">
            <div class="d-flex flex-wrap top-nav-wrapper">
                <div class="selectBox custom-dropdown">
                    <div class="selectBox__value">
                        <span>All</span>
                        <i class="i-arrow-d"></i>
                    </div>
                    <div class="custom-dd-menu">
                        <a data-id="all" class="active">All</a>
                        @foreach (Item faqTitles in currentItem.Children)
                        {
                            <a data-id="@Html.Sitecore().Field("AccordionTitle", faqTitles)">@Html.Sitecore().Field("AccordionTitle", faqTitles)</a>
                        }
                    </div>
                </div>
            </div>
            <div class="list_wrap">
                <div class="subSection scrollableOffset filter-content" id="faq">
                    <div class="accordion" id="accordionExample">
                        @foreach (Item faq in currentItem.Children)
                        {
                            if (i==1)
                            {
                                collapsed = string.Empty;
                                collapse = "collapse show";
                            }
                            else
                            {
                                collapsed = "collapsed";
                                collapse = "collapse";
                            }
                            <div class="accordion-item" data-category="@Html.Sitecore().Field("AccordionTitle", faq)">
                                <div class="accordion-header" id="heading@(i)">
                                    <button class="accordion-button @collapsed" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#collapse@(i)" aria-expanded="false" aria-controls="collapse@(i)">
                                        @Html.Sitecore().Field("AccordionTitle", faq)
                                    </button>
                                </div>
                                <div id="collapse@(i)" class="accordion-collapse @collapse" aria-labelledby="heading@(i)"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="detail-points">
                                            @Html.Sitecore().Field("AccordionDescription", faq)
                                        </div>
                                    </div>
                                </div>
                            </div>
                            i++;
                        }
                    </div>
                </div>
            </div>
        </section>
    </div>
}
