@using Sitecore.Mvc
@using Sitecore.Mvc.Presentation
@using Sitecore.Data.Items
@model RenderingModel
@{
    Item currentItem = RenderingContext.Current.Rendering.Item;
    var i = 0;

}

@if (currentItem != null)
{
    <section class="faq-sectionWrap">
        <h3>@Html.Sitecore().Field("__Short description", currentItem)</h3>
        <div class="accordion d-block d-md-none mSiteAcoordian" id="accordionExample">
            @foreach (Sitecore.Data.Items.Item mobileitem in currentItem.Children)
            {
                Sitecore.Data.Fields.MultilistField faqItems = ((Sitecore.Data.Fields.MultilistField)mobileitem.Fields["AllCategoriesList"]);
                Sitecore.Data.Fields.LinkField linkField = ((Sitecore.Data.Fields.LinkField)mobileitem.Fields["FAQQuestionRedirectLink"]);
                Sitecore.Data.Fields.LinkField seeAllLinkField = ((Sitecore.Data.Fields.LinkField)mobileitem.Fields["SeeAllLink"]);
                var redirectUrl = linkField.GetFriendlyUrl();
                var seeAllUrl = seeAllLinkField.GetFriendlyUrl();


                <div class="accordion-item">
                    <div class="accordion-header" id="heading@(i)">
                        <button class="accordion-button collapsed"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#collapse@(i)"
                                aria-expanded="false"
                                aria-controls="collapse@(i)">
                            <h4>@Html.Sitecore().Field("Heading", mobileitem)</h4>
                        </button>
                    </div>
                    <div id="collapse@(i)"
                         class="accordion-collapse collapse"
                         aria-labelledby="heading@(i)"
                         data-bs-parent="#accordionExample">
                        <div class="accordion-body">

                            @foreach (Sitecore.Data.Items.Item mobilefaqitem in faqItems.GetItems())
                            {
                                if (redirectUrl != null)
                                {
                                    <a href="@redirectUrl?faq=@mobilefaqitem.DisplayName" class="question-link">@mobilefaqitem["Question"]</a>
                                }
                            }

                            @if (seeAllUrl != null)
                            {
                                <a href="@seeAllUrl" class="black_link"> @seeAllLinkField.Text</a>
                            }

                        </div>
                    </div>
                </div>
                i++;
            }


        </div>

        <div class="all-cate d-none d-md-block">
            <div class="row">

                @foreach (Sitecore.Data.Items.Item item in currentItem.Children)
                {
                    Sitecore.Data.Fields.MultilistField faqItems = ((Sitecore.Data.Fields.MultilistField)item.Fields["AllCategoriesList"]);
                    Sitecore.Data.Fields.LinkField linkField = ((Sitecore.Data.Fields.LinkField)item.Fields["FAQQuestionRedirectLink"]);
                    Sitecore.Data.Fields.LinkField seeAllLinkField = ((Sitecore.Data.Fields.LinkField)item.Fields["SeeAllLink"]);
                    var redirectUrl = linkField.GetFriendlyUrl();
                    var seeAllUrl = seeAllLinkField.GetFriendlyUrl();
                    <div class="col-md-4">
                        <div>
                            <h4>@Html.Sitecore().Field("Heading", item)</h4>

                            @foreach (Sitecore.Data.Items.Item faqitem in faqItems.GetItems())
                            {
                                if (redirectUrl != null)
                                {
                                    <a href="@redirectUrl?faq=@faqitem.DisplayName" class="question-link">@faqitem["Question"]</a>
                                }
                            }
                            @if (seeAllUrl != null)
                            {
                                <a href="@seeAllUrl" class="black_link"> @seeAllLinkField.Text</a>
                            }
                        </div>
                    </div>
                    i++;
                }
            </div>
        </div>

    </section>
}






