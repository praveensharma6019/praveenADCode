@using Sitecore.Feature.PageContent
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Foundation.Dictionary.Repositories
@using Sitecore.Mvc.Presentation
@using System.Text.RegularExpressions
@model RenderingModel
@{
    var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
    var parent = Sitecore.Context.Database.GetItem(datasource);
    var containerId = Regex.Replace(@Html.Sitecore().Field("Heading").ToString().ToString(), "[^a-zA-Z0-9_]+", "").ToLower();
    var energycalculator = DictionaryPhraseRepository.Current.Get("/More Services For You/Energy Calculator/Energy Calculator", "Energy Calculator");
}

<div class="container energytablinks @containerId" id="@containerId">
    @if (datasource != null)
    {
        var i = 0;
        <div class="my-3 py-md-3  @Html.Sitecore().Field("Tab css")">
            @*<h3 class="txt-orange mb-2">@Html.Sitecore().Field("Heading")</h3>*@
            <ul class="nav nav-tabs" role="tablist">
                @foreach (var child in parent.Children.ToList())
                {
                    var replacestr = Regex.Replace(@Html.Sitecore().Field(Templates.HasPageContent.Fields.Title, child).ToString(), "[^a-zA-Z0-9_]+", "").ToLower();
                    if (i == 0)
                    {
                        <li class="nav-item">
                            <a class="nav-link active show" data-toggle="tab" href="#@replacestr">@Html.Sitecore().Field(Templates.HasPageContent.Fields.Title, child)</a>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#@replacestr">@Html.Sitecore().Field(Templates.HasPageContent.Fields.Title, child)</a>
                        </li>
                    }
                    i++;
                }
            </ul>

            <div class="tab-content @Html.Sitecore().Field("Container CSS") ">
                @foreach (var child in parent.Children.ToList())
                {
                    if (@Html.Sitecore().Field(Templates.HasPageContent.Fields.Title, child).ToString() == energycalculator.ToString())
                    {
                        @Html.Sitecore().Placeholder("energy-calculator")

                    }
                    else if (@Html.Sitecore().Field(Templates.HasPageContent.Fields.Title, child).ToString() == "Energy Wizard".ToString())
                    {
                        @Html.Sitecore().Placeholder("survey")
                    }
                    else
                    {
                        @Html.Sitecore().Field(Templates.HasPageContent.Fields.Body, child)
                    }
                }
            </div>
        </div>
    }
</div>


