@using Sitecore.Mvc.Presentation
@using Sitecore.Feature.PageContent
@model RenderingModel
@{
    var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
    Sitecore.Data.Items.Item datasourceItem = Sitecore.Context.Database.GetItem(datasource);
    Sitecore.Data.Items.Item contactUsItem = Sitecore.Context.Item;
    string divClass = "circle-icon-small";
}

@if (contactUsItem != null && datasourceItem != null)
{
    Sitecore.Data.Fields.MultilistField multiselectField = datasourceItem.Fields[Templates.ContactUs.Fields.ListingProducts];
    Sitecore.Data.Items.Item[] items = multiselectField.GetItems();

    <div class="col s12 l8 offset-l1 card-with-form section-container">
        <header class="section-header">
            <h1>@Html.Raw(contactUsItem["Title"])</h1>
            <p>@Html.Raw(contactUsItem["Body"])</p>
        </header>
        <div class="contact-us-module">
            <div class="card outlined">
                @foreach (var item in items)
                {
                    string iconImgClass = "";
                    var title = item.Fields["Title"].Value;
                    var description = item.Fields["Body"].Value;
                    string classIcon = item.Fields["CssIconClass"].Value;
                    if (classIcon != null && !String.IsNullOrEmpty(classIcon))
                    {
                        iconImgClass = " <div class=" + divClass + "><i class=" + classIcon + "></i></div>";
                    }
                    else
                    {
                        Sitecore.Data.Fields.ImageField imgField = ((Sitecore.Data.Fields.ImageField)item.Fields["Image"]);
                        string imgurls = Sitecore.Resources.Media.MediaManager.GetMediaUrl(imgField.MediaItem);
                        iconImgClass = "<img src=" + imgurls + " />";
                    }

                    <div class="items section-inner-wrapper">
                        @Html.Raw(iconImgClass)
                        <div class="item-content">
                            <h5>@Html.Raw(title)</h5>
                             @Html.Raw(description)

                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
}