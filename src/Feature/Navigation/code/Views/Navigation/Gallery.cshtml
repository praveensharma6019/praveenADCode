@using Sitecore.Feature.Navigation
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@model Sitecore.Feature.Navigation.Models.NavigationItems
@{
    if (Model?.NavItems == null)
    {
        return;
    }
    List<string> GalleryImageCollection = new List<string>();
    List<string> GalleryTitleCollection = new List<string>();
    var i = 0;
}


<!-- Page Content -->
<div class="pageContent">
    <div class="container">
        <div class="row newsletter">

            @foreach (var item in Model.NavItems)
            {
                var modalID = "";
                if (item.Item.Children != null)
                {
                    if (item.Item.Children.InnerChildren != null)
                    {
                        GalleryImageCollection.Add(item.Item.Children.InnerChildren[0].Fields["ImageCollection"].Value);
                        modalID = "#" + item.Item.Children.InnerChildren[0].Fields["Title"].Value.Replace(' ', '_');
                        GalleryTitleCollection.Add(item.Item.Children.InnerChildren[0].Fields["Title"].Value.Replace(' ', '_'));
                    }
                }


                <div class="col-sm-3">
                    <div class="newsletter-thumb">
                        <a data-toggle="modal" data-target="@modalID">
                            <div class="newsletter-thumb img-zoom cert-thumb">
                                @Html.Sitecore().Field(Templates.LinkMenuItem.Fields.Image, item)
                            </div>
                        </a>
                    </div>
                    <p class="py-4"><b>@item.Item[Templates.LinkMenuItem.Fields.ShortDesc]</b></p>
                </div>
            }
        </div>
    </div>
</div>
<!-- /Page Content -->
<!-- Modal -->

@foreach (var item in GalleryImageCollection)
{
    var collection = Array.Empty<string>();

    collection = item.Split('|');

    <div class="modal" id="@GalleryTitleCollection[i]">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content gallery-slider">

                <!-- Modal Header -->
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="owl-carousel-block">
                        <div class="js-owl-carousel-synced-slides">
                            @foreach (var itemID in collection)
                            {
                                var items = Sitecore.Context.Database.GetItem(Sitecore.Data.ID.Parse(itemID));
                                var url = Sitecore.Resources.Media.MediaManager.GetMediaUrl(items);

                                <div class="item">
                                    <img src="@url" alt="" />
                                </div>
                            }
                        </div>
                        @*</div>*@

                        <div class="js-owl-carousel-synced-thumbnails gallery-thumb">

                            @foreach (var itemID in collection)
                            {
                                var items = Sitecore.Context.Database.GetItem(Sitecore.Data.ID.Parse(itemID));
                                var url = Sitecore.Resources.Media.MediaManager.GetMediaUrl(items);

                                <div class="item">
                                    <img src="@url" alt="" />
                                </div>
                            }

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    i++;
}