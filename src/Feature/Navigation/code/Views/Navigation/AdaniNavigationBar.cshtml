@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Mvc.Presentation
@using Sitecore.Mvc
@using Sitecore.Feature.Navigation
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@model Sitecore.Feature.Navigation.Models.NavigationItems
@{
    var datasource = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.DataSource;
    var models = Sitecore.Context.Database.GetItem(datasource);
    var css = Html.Sitecore().Field("{523E9539-71B6-4739-BF8C-F275A13B2100}", Model);

    var paramid = Sitecore.Mvc.Presentation.RenderingContext.Current.Rendering.Parameters;

    var img = paramid.Count() != 0 ? Sitecore.Context.Database.GetItem(paramid["background-image"]) : null;
}

<section class="@css">
    @if (img != null)
    {
        <div class="bg-images">@Html.Sitecore().ImageField(Templates.HasBannerSelector.Fields.Image, img)</div>
    }
    <div class="container">
        <div class="row">
            @foreach (var child in Model.NavItems.ToList())
            {
                var bgcss = Html.Sitecore().Field(Templates.LinkMenuItem.Fields.BGCSS, child);
                string[] cls = bgcss.ToString().Split(';');
                if (string.IsNullOrEmpty(cls[0]))
                {
                    <div class="@cls[1]">
                        <div class="bg-images">@Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.VideoThumb, child.Item)</div>
                        <a href="@child.Url">
                            @Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.Image, child.Item, 0, 0, "imgt")
                            <h3 class="pb-4 pt-2">@Html.Sitecore().Field(Templates.LinkMenuItem.Fields.ShortDesc, child)</h3>

                        </a>
                    </div>

                }
                else
                {
                    <div class="@cls[0]">
                        <div class="bg-images">@Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.VideoThumb, child.Item)</div>
                        <a href="@child.Url">
                            <div class="@cls[1]">
                                @Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.Image, child.Item, 0, 0, "pt-5 pb-3 imgt")
                                <h3 class="pb-4 pt-2">@Html.Sitecore().Field(Templates.LinkMenuItem.Fields.ShortDesc, child)</h3>
                            </div>
                        </a>
                    </div>

                }
            }
        </div>
    </div>
</section>