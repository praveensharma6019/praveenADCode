@using Sitecore.Feature.Navigation
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Mvc.Presentation
@model Sitecore.Feature.Navigation.Models.NavigationItems
@{
    if (Model?.NavItems == null)
    {
        return;
    }
}

@{
    var datasource = Sitecore.Mvc.Presentation.PageContext.Current.Item.ID;
    var models = Sitecore.Context.Database.GetItem(datasource);
}

<div class="section bg-white">
    <div class="container">
        <div class="my-md-3 py-3 text-center">
            <p class="lead">@Html.Sitecore().Field(Templates.HasPageContent.Fields.Body, models) </p>
        </div>
        <div class="row mt-3 pt-md-3">
            @foreach (var item in Model.NavItems)
            {
                <div class="col-md-6 projectCard">
                    <div class="card">
                        <a href="@item.Url" class="projectImg">
                            @Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.Image, item.Item)
                        </a>

                        <div class="card-body">
                            <h3 class="card-title sectionHeading leftAlign">@Html.Sitecore().ImageField(Templates.Navigable.Fields.NavigationTitle, item.Item)</h3>
                            <p class="card-text">@Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.ShortDesc, item.Item)</p>
                        </div>
                        <ul class="list-group list-group-flush projectsList">
                            @foreach (var childitem in item.Children.NavItems)
                            {
                                if (childitem.IsNewTab)
                                {
                                    <li class="list-group-item"><a target="_blank" href="@childitem.Url">@Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.ShortDesc, childitem.Item)</a></li>
                                }
                                else
                                {
                                    <li class="list-group-item"><a href="@childitem.Url">@Html.Sitecore().ImageField(Templates.LinkMenuItem.Fields.ShortDesc, childitem.Item)</a></li>
                                }
                            }
                        </ul>
                    </div>
                </div>
            }
        </div>
    </div>
</div>