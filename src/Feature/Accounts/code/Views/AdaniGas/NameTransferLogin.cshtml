@using Sitecore.Feature.Accounts
@using Sitecore.Feature.Accounts.Services
@using Sitecore.Foundation.Dictionary.Extensions
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Mvc.Configuration
@using CaptchaMvc;
@using CaptchaMvc.HtmlHelpers;
@model Sitecore.Feature.Accounts.Models.NameTransferAdminRegistation

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.10/jquery.validate.unobtrusive.min.js"></script>

@if (Session["Message"] != null && !string.IsNullOrEmpty(Session["Message"].ToString()))
{
    <div class="form-group row">
        <input id="submit_message" type="hidden" value="@Session["Message"].ToString()" />
    </div>
}
@{
    var ShowUpdatePasswordMessage = Request.QueryString["ChangeAdminPassword"] != null ? Request.QueryString["ChangeAdminPassword"] : "false";
    var UpdatePasswordPopup = Request.QueryString["UpdatePassword"] != null ? Request.QueryString["UpdatePassword"] : "false";
}

<section class="section_ICRS-form pb-5">
    <div class="bg-images"><img src="/images/ICRS-BG.png"></div>

    <div class="container">
        <div class="complaint-panel">
            <div class="row no-gutters">
                @*<div class="col-lg-6">
                        <div class="complaint-panel_login-thumb">
                            <img src="/images/ICRS/ICRS-login.png">
                        </div>
                    </div>*@
                <div class="col-lg-6">
                    <div class="complaint-panel_login-form">

                        @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form-signin"}))
                        {
                            @Html.AddUniqueFormId()
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true)

                            <div class="form-group row no-gutters @Html.ValidationErrorFor(x => x.Username, "has-error")">

                                <div class="col-sm-12">
                                    @Html.TextBoxFor(x => x.Username, new { @class = "form-control", @autocomplete = "off", id = "UserName", placeholder = "User Name" })
                                    @Html.ValidationMessageFor(x => x.Username, "", new { @class = "help-block", required = "required" }, "p")
                                </div>
                            </div>
                            <div class="form-group row no-gutters">

                                <div class="col-sm-12">
                                    @Html.PasswordFor(x => x.Password, new
                               {
                                   @class = "form-control",
                                   id = "LECregisterPassword",
                                   @autocomplete = "off",
                                   required = "required",
                                   placeholder = "Password"
                               })
                                    @Html.ValidationMessageFor(x => x.Password, "", new { @class = "help-block" }, "p")
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group @Html.ValidationErrorFor(x => x.Captcha, " has-error")">
                                    <label for="" class="">@Html.Sitecore().Dictionary("/Accounts/Register/Captcha", "Captcha") <span class="required">*</span></label>
                                    <div class="">
                                        @Html.Captcha("Try another", "Enter the text you see above:", 4, "Is required field", true)
                                        @Html.ValidationMessageFor(x => x.Captcha, "", new { @class = "help-block" }, "p")
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="display:flex">
                                <div class="col-lg-2 col-md-2">
                                    <input type="submit" id="btn_NameTransferAdminLogin" class="btn btn-primary w-auto" name="SignInWithCredentials" value="@Html.Sitecore().Dictionary("/CON/LECLogin/Button/Sign in", "Sign in")" />
                                </div>
                                <div class="col-lg-2 col-md-2">
                                    <div class="text-right">
                                        <a class="btn btn-primary mb-2 mb-md-0" id="btn_NameTransferForgotPassword" href="/NameTransferResetPassword">Forgot Password</a>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
<script src="@Html.Sitecore().Dictionary("/Common/CaptchaURL", "https://www.google.com/recaptcha/api.js")"></script>

<div id="submit_message_modal" class="modal fade show" role="dialog" style="display: none; padding-right: 17px;" data-id="">
    <div class="modal-dialog modal-dialog-centered">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <p>Message</p>
                <button type="button" class="close" data-dismiss="modal">X</button>
            </div>
            <div class="modal-body">
                @if (Session["Message"] != null && !string.IsNullOrEmpty(Session["Message"].ToString()))
                {
                    <div class="form-group row">
                        <label for="" class="col-sm-12 col-form-label txt-green">@Session["Message"].ToString()</label>
                        @*@if (Session["AlertMessage"] != null && !string.IsNullOrEmpty(Session["AlertMessage"].ToString()))
                            {
                            <p class="col-sm-12 col-form-label txt-orange">@Session["AlertMessage"].ToString()</p>
                            }*@
                    </div>
                    Session["Message"] = null;
                    Session["AlertMessage"] = null;
                }
            </div>
            <button type="button" style="padding-bottom:10px;" class="close" data-dismiss="modal">Ok</button>
        </div>

    </div>
</div>
@if (ShowUpdatePasswordMessage == "true")
{
    <div id="submited_Change_Name_Transfer_Message" class="modal fade show" role="dialog" style="padding-right: 17px;" data-id="">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <p>Message</p>

                    <button id="submited_updatepassword" type="button" class="close" data-dismiss="modal">X</button>
                </div>
                @if (Session["UpdateNameTransferAdminPassword"] != null)
                {
                    <div class="modal-body">
                        <div class="form-group row d-block">
                            <div class="col-lg-12">
                                <div class="form-group">
                                    @Session["UpdateNameTransferAdminPassword"]
                                    <small id="" class="form-text text-muted"></small>
                                </div>
                            </div>

                        </div>
                    </div>
                    <button type="button" id="submited_NameTransfer_updatepassword" onclick="toggleText()" style="padding-bottom:10px;" class="close" data-dismiss="modal">Ok</button>
                }
            </div>
        </div>
    </div>
}
@if (UpdatePasswordPopup == "true")
{
    <div id="Change_Password_message_modal" class="modal fade show" role="dialog" style="padding-right: 17px;" data-id="">
        <div class="modal-dialog modal-dialog-centered">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <p>Message</p>
                    <button type="button" class="close" data-dismiss="modal" id="Close_Change_Password_message_modal">X</button>
                </div>
                <div class="modal-body">
                    @*<p class="message_modal_message"></p>*@
                    <label for="" class="col-sm-12 col-form-label txt-green">Your Password Changed Successfully. Please check your registered email Id. </label>

                </div>
                <button type="button" class="close" data-dismiss="modal" id="Close_Change_Password_message_modals">OK</button>
            </div>
        </div>
    </div>
}