@using Sitecore.Mvc
@using Sitecore.Mvc.Presentation
@using Sitecore.Data.Items
@model RenderingModel
@{
    Item currentItem = RenderingContext.Current.Rendering.Item;
    var i = 0;
}
@if (currentItem != null)
{
    <section class="section-wrap mainHeading mb-0" id="@currentItem.DisplayName">
        <div class="container" itemscope itemtype="http://schema.org/FAQPage">
            <h3 class="faq-title">@Html.Sitecore().Field("__Short description", currentItem)</h3>
            <div class="accordion" id="accordionExample">

                @foreach (Item faq in currentItem.Children)
                {
                    <div class="accordion-item" itemscope="" itemProp="mainEntity" itemType="https://schema.org/Question">
                        <h2 itemprop="name" class="accordion-header" id="heading@(i)" auto_id="data_question_text_@(i)">
                            <button class="accordion-button collapsed gtmAccordionSelect" type="button" data-bs-toggle="collapse" data-bs-target="#collapse@(i)" aria-expanded="false" aria-controls="collapse@(i)" data-label="@Html.Sitecore().Field("AccordionTitle", faq)" data-subcategory="help_and_support" data-event="view_faq">
                                @Html.Sitecore().Field("AccordionTitle", faq)
                            </button>

                        </h2>
                        <div id="collapse@(i)" class="accordion-collapse collapse" aria-labelledby="heading@(i)" data-bs-parent="#accordionExample">
                            <div itemProp="acceptedAnswer" itemscope="" itemType="https://schema.org/Answer">
                            <div itemProp="text" class="accordion-body" auto_id="data_answer_text_@(i)">
                                @Html.Sitecore().Field("AccordionDescription", faq)
                            </div>
                        </div>
                        </div>
                    </div>
                    i++;

                }
            </div>
            <div class="moreFaq">
                @Html.Sitecore().Field("__Help link", currentItem, new { @auto_id = "data_href_see_all_questions", @class = "gtmAccordionSeeAllSelect", @data_subcategory = "help_and_support", @data_event = "view_see_all" })
            </div>
        </div>
    </section>
}
