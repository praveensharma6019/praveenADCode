@using Sitecore.Data.Fields
@using Sitecore.Feature.Media
@using Sitecore.Feature.Media.Repositories
@using Sitecore.Foundation.Alerts
@using Sitecore.Foundation.Alerts.Extensions
@using Sitecore.Foundation.Dictionary.Extensions
@using Sitecore.Foundation.SitecoreExtensions.Extensions
@using Sitecore.Foundation.Theming.Extensions
@using Sitecore.Resources.Media
@model Sitecore.Mvc.Presentation.RenderingModel
@if (!Model?.Item?.IsDerived(Templates.HasMediaSelector.ID) ?? true)
{
    //@Html.PageEditorError(AlertTexts.InvalidDataSourceTemplate(Templates.HasMediaSelector.ID), AlertTexts.InvalidDataSourceTemplateFriendlyMessage, Model.Item?.ID, Model.Rendering.Item?.ID)
   // return;
}

@{
    var carouselId = "carousel" + Guid.NewGuid().ToString("N");
    var elements = MediaSelectorElementsRepository.Get(Model.Item).ToArray();
    int? carouselHeight = null;
    var mobileMedia = Model.Item.Fields["MobileMediaSelector"].Value;
    var i = 0;
}


<div class="mainSlider">
    test
    @foreach (var element in elements)
    {
        <div class="owl-carousel owl-theme homeslider">
            <div class="item">
                @{
                    //var style = "background-image: ";
                    var field = element.Item.IsDerived(Templates.HasMediaVideo.ID) ? Templates.HasMedia.Fields.Thumbnail : Templates.HasMediaImage.Fields.Image;
                    var style = element.Item.ImageUrl(field, new MediaUrlOptions()).ToCssUrlValue();
                    var mediaUrl = element.Item.MediaUrl(field, new MediaUrlOptions()).ToCssUrlValue();
                    var fixedHeight = Model.Rendering.IsFixedHeight();
                    if (fixedHeight && carouselHeight.HasValue)
                    {
                        style += "; height:" + carouselHeight + "px;";
                    }

                    var ImagePath = "";
                    if (mobileMedia.Count() > i)
                    {
                        var imageItem = Sitecore.Context.Database.GetItem(new Sitecore.Data.ID(mobileMedia.Split('|')[i].ToString()));
                        ImagePath = MediaManager.GetMediaUrl(imageItem);
                    }
                    i++;
                    Sitecore.Data.Fields.LinkField linkfield = element.Item.Fields[Templates.HasMedia.Fields.Link];
                    var url = linkfield.GetFriendlyUrl();
                }
                <picture>
                    <source srcset="@style" media="(min-width: 1779px)">
                    <source srcset="@style" media="(min-width: 1400px)">
                    <source srcset="@style" media="(min-width: 1084px)">
                    <source srcset="@style" media="(min-width:768px)">
                    <source srcset="@style" media="(min-width:540px)">
                    <source srcset="@ImagePath" media="(min-width:0)">
                    <img srcset="@style" src="@style" alt="">
                </picture>
            </div>
        </div>

        <section class="slider-content">
            <div>
                @Html.Sitecore().Field("Description", element)
            </div>
        </section>


    }

    <!--/Banner Content-->
    <!--Calculator-->
    <section class="filter-box">
        <div class="skew-bg"></div>
        <div class="container-fluid">
            @Html.Sitecore().Placeholder("PropertySearch-form")
        </div>
    </section>
    <!--/Calculator-->
</div>


